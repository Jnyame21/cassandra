import{V as v,a as f,_ as x}from"./Dom57xaj.js";import{E as k,d as V,F as A,e as F,G as S,H as C,I,c as M,v as m,x as n,z as r,A as _,J as B,t as p,K as t,y as h,L as g,B as D,C as N,D as T,_ as E}from"./B1D96XxP.js";import{u as y}from"./C1u3M5Wd.js";import{_ as L}from"./BUfmaqMB.js";import{V as U}from"./22xfYYdk.js";function R(o,s){const{title:d,titleTemplate:e,...l}=o;return y({title:d,titleTemplate:e,_flatMeta:l},{...s,transform(i){const c=k({...i._flatMeta});return delete i._flatMeta,{...i,meta:c}}})}const b=o=>(N("data-v-d80c9c68"),o=o(),T(),o),j={class:"container img-container flex-c align-center justify-center",style:{height:"100dvh"}},G={style:{height:"90dvh"},class:"row-wrapper"},H={class:"flex-all-c form-container"},O=b(()=>n("h1",{class:"portal-name"},"CASSANDRA",-1)),z=b(()=>n("img",{class:"sch-logo",src:L,alt:"school logo"},null,-1)),J={class:"flex-c align-center",style:{"background-color":"transparent"}},K={class:"form-message-container"},P={key:0,class:"form-message",style:{color:"yellow"}},W={key:1,class:"form-message",style:{color:"red"}},$=V({__name:"index",setup(o){const s=A();R({title:"Cassandra | Login",description:"Login to Cassandra, the school management system."}),y({meta:[{name:"robots",content:"index, follow"}]}),F(()=>{document.body.style.overflow="auto"}),S(()=>{document.body.style.overflow="hidden"});const d=C(),e=I({form:!1,username:"",password:"",loading:!1,visible:!1,lockField:!1});let l=M(()=>!(e.username&&e.password));const i=async()=>{e.loading=!0,e.lockField=!0,await s.userLogin(e.username,e.password).then(c=>{s.isAuthenticated&&s.userData.role==="staff"||s.isAuthenticated&&s.userData.role==="head"?(e.password="",e.loading=!1,setTimeout(()=>{d.push("/staff")},2e3)):s.isAuthenticated&&s.userData.role==="student"&&(e.password="",e.loading=!1,setTimeout(()=>{d.push("/student")},2e3))}).catch(c=>{e.loading=!1,e.lockField=!1,setTimeout(()=>{s.message=""},6e3)})};return(c,a)=>{const w=x;return p(),m("div",j,[n("div",G,[n("section",H,[O,z,n("div",J,[r(v,{class:"flex-c justify-start align-center",onSubmit:B(i,["prevent"])},{default:_(()=>[n("div",K,[t(s).message&&t(s).isAuthenticated?(p(),m("h6",P,h(t(s).message),1)):g("",!0),t(s).message&&!t(s).isAuthenticated?(p(),m("h6",W,h(t(s).message),1)):g("",!0)]),r(f,{disabled:e.lockField,class:"form-text-field username",modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=u=>e.username=u),label:"USERNAME",hint:"Enter your username",density:"comfortable",type:"text",clearable:"",onFocus:t(l),"prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue","onFocus"]),r(f,{"append-inner-icon":e.visible?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":a[1]||(a[1]=u=>e.visible=!e.visible),disabled:e.lockField,type:e.visible?"text":"password",clearable:"",onFocus:t(l),density:"comfortable",class:"form-text-field password",hint:"Enter your password",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=u=>e.password=u),label:"PASSWORD","prepend-inner-icon":"mdi-lock-outline"},null,8,["append-inner-icon","disabled","type","onFocus","modelValue"]),r(U,{class:"submit-btn",type:"submit","prepend-icon":"mdi-lock-open-outline",loading:e.loading,disabled:t(l)},{default:_(()=>[D("LOGIN ")]),_:1},8,["loading","disabled"])]),_:1})])])]),r(w)])}}}),ee=E($,[["__scopeId","data-v-d80c9c68"]]);export{ee as default};
