import{V as v,a as f,_ as x}from"./Dj_TyHVA.js";import{E as k,F as V,d as A,G as F,e as S,H as M,I as C,J as I,c as B,v as m,x as n,z as r,A as _,K as D,t as p,L as t,y as h,M as g,B as N,C as T,D as E,_ as L}from"./CJhruBnl.js";import{u as y}from"./-UxRPX4R.js";import{V as U}from"./D_w_0sjn.js";function R(o,s){const{title:d,titleTemplate:e,...l}=o;return y({title:d,titleTemplate:e,_flatMeta:l},{...s,transform(i){const c=k({...i._flatMeta});return delete i._flatMeta,{...i,meta:c}}})}const j=V("/login_logo.jpg"),b=o=>(T("data-v-d80c9c68"),o=o(),E(),o),G={class:"container img-container flex-c align-center justify-center",style:{height:"100dvh"}},H={style:{height:"90dvh"},class:"row-wrapper"},O={class:"flex-all-c form-container"},z=b(()=>n("h1",{class:"portal-name"},"CASSANDRA",-1)),J=b(()=>n("img",{class:"sch-logo",src:j,alt:"school logo"},null,-1)),K={class:"flex-c align-center",style:{"background-color":"transparent"}},P={class:"form-message-container"},W={key:0,class:"form-message",style:{color:"yellow"}},$={key:1,class:"form-message",style:{color:"red"}},q=A({__name:"index",setup(o){const s=F();R({title:"Cassandra | Login",description:"Login to Cassandra, the school management system."}),y({meta:[{name:"robots",content:"index, follow"}]}),S(()=>{document.body.style.overflow="auto"}),M(()=>{document.body.style.overflow="hidden"});const d=C(),e=I({form:!1,username:"",password:"",loading:!1,visible:!1,lockField:!1});let l=B(()=>!(e.username&&e.password));const i=async()=>{e.loading=!0,e.lockField=!0,await s.userLogin(e.username,e.password).then(c=>{s.isAuthenticated&&s.userData.role==="staff"||s.isAuthenticated&&s.userData.role==="head"?(e.password="",e.loading=!1,setTimeout(()=>{d.push("/staff")},2e3)):s.isAuthenticated&&s.userData.role==="student"&&(e.password="",e.loading=!1,setTimeout(()=>{d.push("/student")},2e3))}).catch(c=>{e.loading=!1,e.lockField=!1,setTimeout(()=>{s.message=""},6e3)})};return(c,a)=>{const w=x;return p(),m("div",G,[n("div",H,[n("section",O,[z,J,n("div",K,[r(v,{class:"flex-c justify-start align-center",onSubmit:D(i,["prevent"])},{default:_(()=>[n("div",P,[t(s).message&&t(s).isAuthenticated?(p(),m("h6",W,h(t(s).message),1)):g("",!0),t(s).message&&!t(s).isAuthenticated?(p(),m("h6",$,h(t(s).message),1)):g("",!0)]),r(f,{disabled:e.lockField,class:"form-text-field username",modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=u=>e.username=u),label:"USERNAME",hint:"Enter your username",density:"comfortable",type:"text",clearable:"",onFocus:t(l),"prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue","onFocus"]),r(f,{"append-inner-icon":e.visible?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":a[1]||(a[1]=u=>e.visible=!e.visible),disabled:e.lockField,type:e.visible?"text":"password",clearable:"",onFocus:t(l),density:"comfortable",class:"form-text-field password",hint:"Enter your password",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=u=>e.password=u),label:"PASSWORD","prepend-inner-icon":"mdi-lock-outline"},null,8,["append-inner-icon","disabled","type","onFocus","modelValue"]),r(U,{class:"submit-btn",type:"submit","prepend-icon":"mdi-lock-open-outline",loading:e.loading,disabled:t(l)},{default:_(()=>[N("LOGIN ")]),_:1},8,["loading","disabled"])]),_:1})])])]),r(w)])}}}),ee=L(q,[["__scopeId","data-v-d80c9c68"]]);export{ee as default};
